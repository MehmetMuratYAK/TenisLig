<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tenis Ligi</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#c06035"> 
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

    <div id="auth-screen">
        <div class="auth-wrapper">
            <div class="logo-area">
                <img src="logo.png" alt="Tenis Ligi Logo" style="width: 100px; height: auto; margin-bottom: 10px;">
                <h2>Tenis Ligi</h2>
                <p style="color: #eee; font-size: 0.9em;">Kortlara hoÅŸ geldin!</p>
            </div>

            <div class="auth-card">
                <div class="auth-tabs">
                    <div class="auth-tab active" id="tab-login-switch">GiriÅŸ Yap</div>
                    <div class="auth-tab" id="tab-register-switch">KayÄ±t Ol</div>
                </div>

                <div class="auth-form-container">
                    
                    <p id="auth-error" style="display:none;"></p>

                    <div id="register-fields" style="display: none;">
                        <div class="profile-upload-container">
                            <img id="profile-preview" src="https://via.placeholder.com/100" alt="Profil">
                            <label for="profile-photo" class="upload-label">+ FotoÄŸraf SeÃ§</label>
                            <input type="file" id="profile-photo" accept="image/*" style="display:none;">
                        </div>

                        <div class="input-group">
                            <span class="input-icon">ğŸ‘¤</span>
                            <input type="text" id="full-name" placeholder="Ad Soyad">
                        </div>

                        <div class="input-group">
    <span class="input-icon">ğŸ“…</span>
    <div style="flex:1;">
        <label style="font-size:0.75em; color:#666; margin-left:45px; margin-bottom:2px; display:block;">Tenise BaÅŸlangÄ±Ã§ Tarihi</label>
        <input type="month" id="register-start-date" style="margin-top:0;">
    </div>
</div>

<div class="input-group">
    <span class="input-icon">ğŸŸï¸</span>
    <select id="register-club" style="margin-bottom:0;">
        <option value="" disabled selected>OynadÄ±ÄŸÄ±nÄ±z KulÃ¼p SeÃ§in</option>
        </select>
</div>
                        
                        <div class="input-group">
                            <span class="input-icon">ğŸŸï¸</span>
                            <select id="court-preference" style="margin-bottom:0;">
                                <option value="" disabled selected>Favori Kort Tipi</option>
                                <option value="Toprak">Toprak ğŸ§±</option>
                                <option value="Sert">Sert ğŸŸ¦</option>
                                <option value="Ã‡im">Ã‡im ğŸŒ±</option>
                                <option value="Her Ä°kisi">Farketmez ğŸ¤·â€â™‚ï¸</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <span class="input-icon">ğŸ“±</span>
                            <input type="tel" id="phone-number" placeholder="Telefon (05XX...)">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <span class="input-icon">âœ‰ï¸</span>
                        <input type="email" id="email" placeholder="E-posta Adresi">
                    </div>

                    <div class="input-group">
                        <span class="input-icon">ğŸ”’</span>
                        <input type="password" id="password" placeholder="Åifre">
                    </div>
                    
                    <button id="auth-action-btn" class="btn-main">GiriÅŸ Yap</button>
                    
                    <div id="login-footer-links" style="margin-top: 15px; text-align: center;">
                        <span id="forgot-password-link" style="color:#666; font-size:0.85em; cursor:pointer; text-decoration: underline;">Åifremi Unuttum?</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="main-app" style="display: none;">
        
        <div class="header-container">
            <h1>ğŸ¾ Tenis Ligi</h1>
        </div>

<div id="tab-lobby" class="tab-section active-section">
            <h3>Lobi ğŸ </h3>
            
            <div id="email-spam-alert" class="warning-banner" style="display: flex;">
                <div class="warning-icon">ğŸ“§</div>
                <div class="warning-content">
                    <strong>Ã–nemli Bilgilendirme</strong>
                    <p>Bildirimleri gÃ¶remiyorsanÄ±z lÃ¼tfen e-posta kutunuzun <strong>Gereksiz (Spam)</strong> klasÃ¶rÃ¼nÃ¼ kontrol ediniz.</p>
                </div>
                <button id="btn-close-spam-alert" class="warning-close">&times;</button>
            </div>

            <div id="profile-incomplete-alert" class="warning-banner info-banner" style="display: none;">
        <div class="warning-icon">ğŸ‘¤</div>
        <div class="warning-content">
            <strong>Profilin Ã‡ok Sessiz GÃ¶rÃ¼nÃ¼yor!</strong>
            <p>DiÄŸer oyuncularÄ±n seni tanÄ±masÄ± iÃ§in fotoÄŸrafÄ±nÄ± yÃ¼kle ve bilgilerini tamamla.</p>
            <button id="btn-fix-profile" style="background:#0d47a1; color:white; padding:5px 10px; font-size:0.8em; margin-top:5px; width:auto; border-radius:15px;">Hemen DÃ¼zenle âœï¸</button>
        </div>
        <button id="btn-close-profile-alert" class="warning-close">&times;</button>
    </div>
            
            <div id="weather-widget" class="lobby-card" style="background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%); color: white; border:none; display:none;">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div>
                            <h4 style="color:white; margin:0; border:none; font-size:1.1em; text-shadow:0 1px 2px rgba(0,0,0,0.1);">ğŸŒ¤ï¸ Bursa Kort HavasÄ±</h4>
                            <div id="weather-desc" style="font-size:0.9em; opacity:0.95; margin-top:2px;">YÃ¼kleniyor...</div>
                        </div>
                        <div style="text-align:right;">
                            <div id="weather-temp" style="font-size:1.8em; font-weight:bold; text-shadow:0 1px 3px rgba(0,0,0,0.2);">--Â°C</div>
                            <div id="weather-wind" style="font-size:0.8em; opacity:0.9;">ğŸ’¨ -- km/s</div>
                        </div>
                    </div>
            </div>

            <div class="lobby-card" style="background: linear-gradient(to right, #ffffff, #f8f9fa); border-left: 4px solid #6f42c1;">
                <h4 style="color:#6f42c1;">ğŸ“¢ Ligden Haberler & Dedikodular</h4>
                <p style="font-size:0.8em; color:#888; margin-bottom:10px;">Yapay zeka ligi izliyor ve yorumluyor... ğŸ¤–</p>
                <div id="lobby-announcements-container" class="lobby-scroll-list" style="max-height: 350px;">
                    <p style="text-align:center; color:#777;">Haberler yÃ¼kleniyor...</p>
                </div>
            </div>

            <div class="lobby-card" style="background: #fff; border-left: 4px solid #0056b3; padding: 15px;">
                <h4 style="color:#0056b3; margin-bottom:15px;">ğŸ† Turnuvalar & Takvim</h4>
                <div style="display: flex; gap: 12px; overflow-x: auto; padding-bottom: 5px; -webkit-overflow-scrolling: touch;">
                    
                    <a href="https://www.ikort.com.tr/turnuvalar" target="_blank" style="text-decoration:none; color:inherit; min-width: 85px;">
                        <div style="height: 60px; background: #e3f2fd; border-radius: 12px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:1px solid #bbdefb; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                            <span style="font-size: 1.1em; font-weight:bold; color:#0d47a1;">i-KORT</span>
                            <span style="font-size: 0.65em; font-weight:bold; color:#0d47a1; margin-top:2px;">TAKVÄ°MÄ°</span>
                        </div>
                    </a>

                    <a href="https://www.atptour.com" target="_blank" style="text-decoration:none; color:inherit; min-width: 85px;">
                        <div style="height: 60px; background: #002865; border-radius: 12px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:1px solid #001f4d; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <span style="font-size: 1.1em; color:#fff;">ATP</span>
                            <span style="font-size: 0.65em; font-weight:bold; color:#00aaff; margin-top:2px;">TOUR</span>
                        </div>
                    </a>

                    <a href="https://www.wtatennis.com" target="_blank" style="text-decoration:none; color:inherit; min-width: 85px;">
                        <div style="height: 60px; background: #5c068c; border-radius: 12px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:1px solid #4a0570; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <span style="font-size: 1.1em; color:#fff;">WTA</span>
                            <span style="font-size: 0.65em; font-weight:bold; color:#e040fb; margin-top:2px;">TOUR</span>
                        </div>
                    </a>

                    <a href="https://www.itftennis.com/en/tournament-calendar/mens-world-tennis-tour-calendar/" target="_blank" style="text-decoration:none; color:inherit; min-width: 85px;">
                        <div style="height: 60px; background: #009e49; border-radius: 12px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:1px solid #00803b; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <span style="font-size: 1.1em; color:#fff;">ITF</span>
                            <span style="font-size: 0.65em; font-weight:bold; color:#ccff90; margin-top:2px;">ERKEK</span>
                        </div>
                    </a>

                    <a href="https://www.itftennis.com/en/tournament-calendar/womens-world-tennis-tour-calendar/" target="_blank" style="text-decoration:none; color:inherit; min-width: 85px;">
                        <div style="height: 60px; background: #009e49; border-radius: 12px; display:flex; flex-direction:column; align-items:center; justify-content:center; border:1px solid #00803b; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <span style="font-size: 1.1em; color:#fff;">ITF</span>
                            <span style="font-size: 0.65em; font-weight:bold; color:#ccff90; margin-top:2px;">KADIN</span>
                        </div>
                    </a>

                </div>
            </div>

            <div style="margin-top: 20px; display:flex; justify-content:space-between; align-items:center; margin-bottom: 5px;">
                <h4 style="margin:0; color: #2c3e50; border:none; padding:0;">ğŸ“¢ AÃ§Ä±k MaÃ§ Ä°lanlarÄ±</h4>
                <span style="font-size:0.7em; color:#777;">(KaydÄ±r â†•)</span>
            </div>
            <div id="lobby-requests-container" class="lobby-scroll-list">
                <p style="text-align:center; color:#777; padding:10px;">Ä°lanlar yÃ¼kleniyor...</p>
            </div>

            <div style="margin-top: 20px; display:flex; justify-content:space-between; align-items:center; margin-bottom: 5px;">
                <h4 style="margin:0; color: #2c3e50; border:none; padding:0;">ğŸ“… YaklaÅŸan MaÃ§lar</h4>
                <span style="font-size:0.7em; color:#777;">(KaydÄ±r â†•)</span>
            </div>
            <div id="lobby-scheduled-container" class="lobby-scroll-list">
                <p style="text-align:center; color:#777; padding:10px;">MaÃ§lar yÃ¼kleniyor...</p>
            </div>
        </div>

<div id="tab-rankings" class="tab-section" style="display: none;">
    <h3>Lig SÄ±ralamasÄ± ğŸ†</h3>
    
    <div style="background-color: #f1f3f5; padding: 10px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e9ecef; position: sticky; top: 0; z-index: 10;">
        <select id="leaderboard-club-filter" style="margin-bottom:0; width: 100%;">
            <option value="all">TÃ¼m KulÃ¼pler ğŸŒ</option>
            </select>
    </div>

<div id="leaderboard"></div>
</div>

<div id="tab-bests" class="tab-section" style="display: none;">
            <h3>Ligin En'leri ğŸŒŸ</h3>
            
            <div style="background-color: #f1f3f5; padding: 10px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e9ecef; text-align: center;">
                <select id="bests-filter-select" style="margin-bottom:0; width: auto; display: inline-block;">
                    <option value="all">TÃ¼m Zamanlar â™¾ï¸</option>
                    <option value="month">Bu Ay ğŸ“…</option>
                </select>
            </div>

            <div id="bests-container" class="bests-grid">
                <p style="text-align:center; width:100%; color:#777;">Veriler analiz ediliyor...</p>
            </div>
        </div>

        <div id="tab-challenge" class="tab-section" style="display: none;">
            <h3>Meydan Oku âš”ï¸</h3>
            
            <div class="challenge-center-wrapper">
                
                <div class="challenge-actions" style="margin-top: 10px;">
                    <button id="btn-show-create-ad" class="btn-purple">ğŸ“¢ Herkese AÃ§Ä±k MaÃ§ Talebi OluÅŸtur</button>
                    <button id="btn-show-specific-challenge" class="btn-accept">ğŸ‘¤ Oyuncuya Ã–zel MaÃ§ Talebi OluÅŸtur</button>
                </div>

                <div id="create-ad-form" style="display:none; background:#f9f9f9; padding:15px; border-radius:10px; margin-top:10px; border:1px solid #eee; width: 100%; box-sizing: border-box;">
                    <h4>Yeni MaÃ§ Talebi OluÅŸtur</h4>
                    <p style="font-size:0.85em; color:#666; margin-bottom:10px;">Bu talebi ligdeki herkes gÃ¶rebilir ve kabul edebilir.</p>
                    <select id="ad-match-type">
                        <option value="Dostluk">Dostluk MaÃ§Ä±</option>
                        <option value="Meydan Okuma">PuanlÄ± Meydan Okuma</option>
                    </select>
                    <div class="league-selector-container">
                    <label style="font-size:0.85em; color:#666; display:block; margin-bottom:5px;">Hangi ligler kabul edebilir?</label>
                    <div class="checkbox-group">
                    <label class="checkbox-label league-bronze-text">
                    <input type="checkbox" name="allowed-leagues" value="Bronz" checked> Bronz
                    </label>
                    <label class="checkbox-label league-silver-text">
                    <input type="checkbox" name="allowed-leagues" value="GÃ¼mÃ¼ÅŸ" checked> GÃ¼mÃ¼ÅŸ
                    </label>
                    <label class="checkbox-label league-gold-text">
                    <input type="checkbox" name="allowed-leagues" value="AltÄ±n" checked> AltÄ±n
                    </label>
                    </div>
                    </div>
                    <input type="number" id="ad-wager-points" placeholder="Bahis PuanÄ± (Min 50)" min="50" style="display:none;">
                    <div style="display:flex; gap:10px;">
                        <button id="submit-ad-btn" class="btn-save">YayÄ±nla</button>
                        <button onclick="document.getElementById('create-ad-form').style.display='none';" class="btn-reject" style="background:#ccc; color:#333;">Ä°ptal</button>
                    </div>
                </div>

                <div id="challenge-form" style="display:none; background:#f9f9f9; padding:15px; border-radius:10px; margin-top:10px; border:1px solid #eee; width: 100%; box-sizing: border-box;">
                    <h4>Ã–zel MaÃ§ Talebi</h4>
                    <select id="opponent-select"><option value="">Rakip SeÃ§in</option></select>
                    <select id="match-type-select">
                        <option value="Dostluk">Dostluk MaÃ§Ä±</option>
                        <option value="Meydan Okuma">PuanlÄ± Meydan Okuma</option>
                    </select>
                    <input type="number" id="wager-points" placeholder="Bahis PuanÄ± (Min 50)" min="50" style="display:none;">
                    <div style="display:flex; gap:10px;">
                        <button id="submit-challenge-btn" class="btn-save">Teklifi GÃ¶nder</button>
                        <button onclick="document.getElementById('challenge-form').style.display='none';" class="btn-reject" style="background:#ccc; color:#333;">Ä°ptal</button>
                    </div>
                    <p id="challenge-message"></p>
                </div>

            </div>
            </div>

        <div id="tab-fixture" class="tab-section" style="display: none;">
            <h3>Lig FikstÃ¼rÃ¼ ğŸ“…</h3>
            
            <div id="program-content" style="display:block;">
                <div class="section-container active-matches-section" style="border-left: 5px solid #28a745;">
                    <h4 class="section-title" style="color:#28a745;">ğŸ”¥ OynanÄ±yor & Planlananlar</h4>
                    <div id="fixture-active-container"><p style="text-align:center; color:#777;">YÃ¼kleniyor...</p></div>
                </div>

                <div class="section-container pending-matches-section" style="border-left: 5px solid #ffc107;">
                    <h4 class="section-title" style="color:#ffc107;">â³ Bekleyen Teklifler</h4>
                    <div id="fixture-pending-container"><p style="text-align:center; color:#777;">Veri yok.</p></div>
                </div>

                <div class="section-container history-matches-section" style="border-left: 5px solid #6c757d;">
                    <h4 class="section-title" style="color:#6c757d;">ğŸ“œ Tamamlanan MaÃ§lar (GeÃ§miÅŸ)</h4>
                    <div id="filters-container" style="background-color: #f8f9fa; padding: 10px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e9ecef;">
                        <div class="filter-row">
                            <input type="date" id="filter-date-start" placeholder="BaÅŸlangÄ±Ã§">
                            <input type="date" id="filter-date-end" placeholder="BitiÅŸ">
                        </div>
                        <div class="filter-row">
                            <select id="filter-court"><option value="">TÃ¼m Kortlar</option></select>
                            <select id="filter-player"><option value="">TÃ¼m Oyuncular</option></select>
                        </div>
                        <div class="filter-actions">
                            <button id="apply-filters-btn" class="btn-filter-apply">GeÃ§miÅŸi Filtrele ğŸ”</button>
                            <button id="clear-filters-btn" class="btn-filter-clear">Temizle âŒ</button>
                        </div>
                    </div>
                    <div id="fixture-history-container"><p style="text-align:center; color:#777;">Veri yok.</p></div>
                </div>
            </div>
        </div>

        <div id="tab-matches" class="tab-section" style="display: none;">
            <div class="header-container" style="margin-bottom: 15px; border-bottom: none;">
                <h2 style="margin:0; text-align:left;">MaÃ§ AkÄ±ÅŸÄ± ğŸ¾</h2>
            </div>
            
            <div class="section-container active-matches-section">
                <h4 class="section-title" style="color:#28a745;">ğŸ”¥ Aktif & Planlananlar</h4>
                <div id="my-active-matches-container"></div>
            </div>

            <div class="section-container pending-matches-section">
                <h4 class="section-title" style="color:#ffc107;">â³ Bekleyen Teklifler</h4>
                <div id="my-pending-matches-container"></div>
            </div>

            <div class="section-container history-matches-section">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <h4 class="section-title" style="color:#6c757d; margin-bottom:0;">ğŸ“œ MaÃ§ GeÃ§miÅŸi</h4>
                </div>
                <div class="history-filters-box" style="margin-top:10px;">
                    <div style="display:flex; gap:5px; margin-bottom:5px;">
                        <input type="date" id="hist-filter-start" style="padding:8px; font-size:0.9em;">
                        <input type="date" id="hist-filter-end" style="padding:8px; font-size:0.9em;">
                    </div>
                    <div style="display:flex; gap:5px;">
                        <input type="text" id="hist-filter-player-name" placeholder="Oyuncu AdÄ±..." style="flex:1; padding:8px; font-size:0.9em;">
                        <select id="hist-filter-court" style="flex:1; padding:8px; font-size:0.9em; height:auto;">
                            <option value="">TÃ¼m Kortlar</option>
                        </select>
                    </div>
                    <button id="btn-apply-history-filter" class="btn-purple" style="width:100%; padding:8px; margin-top:5px; font-size:0.9em;">Filtrele ğŸ”</button>
                </div>
                <div id="my-history-matches-container"></div>
            </div>
        </div>
        
        <div id="tab-stats" class="tab-section" style="display: none;">
            <h3>Ä°statistik Merkezi ğŸ“Š</h3>
            
            <div style="background:#f8f9fa; padding:10px; border-radius:10px; margin-bottom:15px; border:1px solid #eee;">
                <label style="font-size:0.8em; color:#666;">Oyuncu Analizi:</label>
                <select id="stats-view-player-select" style="margin-bottom:0;">
                    <option value="me">ğŸ‘¤ Benim Ä°statistiklerim</option>
                    </select>
            </div>

            <div id="stats-content-area" style="display: flex; flex-direction: column; gap: 15px;">
                
                <div style="display: flex; gap: 10px;">
                    <div class="stat-card" style="flex:1; text-align:center; background:#e3f2fd; border-color:#90caf9;">
                        <span style="font-size:2em;">ğŸ¾</span>
                        <div style="font-size:1.5em; font-weight:bold; color:#0d47a1;" id="stat-total-match">0</div>
                        <div style="font-size:0.7em; color:#555;">MaÃ§</div>
                    </div>
                    <div class="stat-card" style="flex:1; text-align:center; background:#e8f5e9; border-color:#a5d6a7;">
                        <span style="font-size:2em;">ğŸ†</span>
                        <div style="font-size:1.5em; font-weight:bold; color:#1b5e20;" id="stat-total-win">0</div>
                        <div style="font-size:0.7em; color:#555;">Galibiyet</div>
                    </div>
                    <div class="stat-card" style="flex:1; text-align:center; background:#fff3e0; border-color:#ffcc80;">
                        <span style="font-size:2em;">â­</span>
                        <div style="font-size:1.5em; font-weight:bold; color:#e65100;" id="stat-total-points">0</div>
                        <div style="font-size:0.7em; color:#555;">Puan</div>
                    </div>
                </div>

                <div class="stat-card">
                    <h4>Performans OranlarÄ±</h4>
                    <div class="stats-grid-charts">
                        <div class="chart-box">
                            <div class="chart-circle" id="chart-win-rate" style="--p:0; --c:#28a745;"><span>0%</span></div>
                            <label>MaÃ§</label>
                        </div>
                        <div class="chart-box">
                            <div class="chart-circle" id="chart-set-rate" style="--p:0; --c:#007bff;"><span>0%</span></div>
                            <label>Set</label>
                        </div>
                        <div class="chart-box">
                            <div class="chart-circle" id="chart-game-rate" style="--p:0; --c:#ffc107;"><span>0%</span></div>
                            <label>Oyun</label>
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <h4>Son Form & Kort</h4>
                    <div style="display:flex; justify-content:center; gap:5px; margin-bottom:15px;" id="stat-form-badges">
                        </div>
                    
                    <div style="margin-top:10px;">
                        <div style="font-size:0.8em; color:#666; margin-bottom:5px;">Kort BazlÄ± Galibiyet %</div>
                        <div class="bar-chart-row">
                            <span class="bar-label">Toprak</span>
                            <div class="bar-track"><div class="bar-fill" id="bar-clay" style="width: 0%; background:#c06035;"></div></div>
                            <span class="bar-val" id="val-clay">0%</span>
                        </div>
                        <div class="bar-chart-row">
                            <span class="bar-label">Sert</span>
                            <div class="bar-track"><div class="bar-fill" id="bar-hard" style="width: 0%; background:#0d47a1;"></div></div>
                            <span class="bar-val" id="val-hard">0%</span>
                        </div>
                        <div class="bar-chart-row">
                            <span class="bar-label">Ã‡im</span>
                            <div class="bar-track"><div class="bar-fill" id="bar-grass" style="width: 0%; background:#28a745;"></div></div>
                            <span class="bar-val" id="val-grass">0%</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div id="tab-gallery" class="tab-section" style="display: none;">
            <h3>Kortlardan Kareler ğŸ“¸</h3>
            
            <div id="gallery-filters" style="background-color: #f8f9fa; padding: 10px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e9ecef;">
                <div class="filter-row">
                    <input type="date" id="gallery-filter-date" placeholder="Tarih">
                </div>
                <div class="filter-row">
                    <select id="gallery-filter-court"><option value="">TÃ¼m Kortlar</option></select>
                    <select id="gallery-filter-player"><option value="">TÃ¼m Oyuncular</option></select>
                </div>
                <div class="filter-actions">
                    <button id="btn-gallery-filter" class="btn-filter-apply">Filtrele ğŸ”</button>
                    <button id="btn-gallery-clear" class="btn-filter-clear">Temizle âŒ</button>
                </div>
            </div>

            <div id="gallery-grid" class="gallery-grid">
                <p style="text-align:center; width:200%; color:#777;">YÃ¼kleniyor...</p>
            </div>
        </div>

        <div id="tab-chat" class="tab-section" style="display: none;">
            <h3>Mesajlar ğŸ’¬</h3>
            <div id="my-chats-section" style="display: block; margin-top: 15px;">
                <div id="chat-list-container">
                    <p style="text-align:center; color:#777;">Sohbetler yÃ¼kleniyor...</p>
                </div>
            </div>
        </div>

<div id="tab-profile" class="tab-section" style="display: none;">
            
            <button id="logout-btn-profile" style="background-color: #dc3545; margin-bottom: 15px;">Ã‡Ä±kÄ±ÅŸ Yap ğŸšª</button>

            <h3>Profilim ğŸ‘¤</h3>

            <div style="background-color: #fff; padding: 20px; border-radius: 10px; border: 1px solid #eee; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                <div class="profile-upload-container">
                    <img id="edit-profile-preview" src="https://via.placeholder.com/100" class="profile-preview-large">
                    <label for="edit-profile-photo" class="upload-label-blue">FotoÄŸrafÄ± DeÄŸiÅŸtir</label>
                    <input type="file" id="edit-profile-photo" accept="image/*" style="display:none;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color:#c06035; text-align:center; border:none; margin-bottom:5px;">ğŸ† BaÅŸarÄ±mlarÄ±m & Rozetlerim</h4>
                    <div id="my-badges-container" class="badges-container">
                        <p style="text-align:center; color:#999; font-size:0.8em; width:100%;">Rozetler yÃ¼kleniyor...</p>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                   <h4 style="color:#555; text-align:center; border:none; margin-bottom:5px; font-size:0.9em; text-transform:uppercase;">ğŸ“¸ MaÃ§ Karelerim</h4>
                   <div id="my-photos-container" class="gallery-grid">
                       </div>
                </div>

                <label class="input-label">Ad Soyad:</label>
                <input type="text" id="edit-full-name" placeholder="Ad Soyad">

                <label class="input-label">Tenise BaÅŸlangÄ±Ã§ Tarihi:</label>
                <input type="month" id="edit-start-date">

                <label class="input-label">OynadÄ±ÄŸÄ± KulÃ¼p:</label>
                <select id="edit-club">
                    <option value="">KulÃ¼p SeÃ§ilmedi</option>
                    </select>
                <label class="input-label">Kort Tercihi:</label>
                <select id="edit-court-preference">
                    <option value="Toprak">Toprak</option>
                    <option value="Sert">Sert</option>
                    <option value="Ã‡im">Ã‡im</option>
                    <option value="Her Ä°kisi">Farketmez</option>
                </select>

                <label class="input-label">Telefon:</label>
                <input type="tel" id="edit-phone-number" placeholder="Telefon">

                <label class="input-label">Bildirim Tercihi (Uygulama Ä°Ã§i):</label>
                <select id="edit-notification-preference">
                    <option value="ses">Ses ğŸ”Š</option>
                    <option value="titresim">TitreÅŸim ğŸ“³</option>
                    <option value="sessiz">Ä°stemiyorum ğŸ”•</option>
                </select>

                <div style="margin-top:15px; margin-bottom:15px; display:flex; align-items:center; gap:10px; background-color:#f9f9f9; padding:10px; border-radius:8px; border:1px solid #eee;">
                    <input type="checkbox" id="edit-email-notify" style="width:20px; height:20px; margin:0;">
                    <label for="edit-email-notify" style="margin:0; font-size:0.95em; color:#333; cursor:pointer;">
                        E-posta ile bilgilendirilmek istiyorum ğŸ“§
                    </label>
                </div>

                <button id="save-profile-btn" class="btn-save-profile">Kaydet ve GÃ¼ncelle</button>
                
                <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

                <div style="margin-top: 30px; border-top: 2px dashed #ddd; padding-top: 20px;">
                    <h4 style="color:#333; text-align:center; margin-bottom:10px;">Tehlikeli BÃ¶lge ğŸ’€</h4>
                    <p style="font-size:0.8em; color:#666; text-align:center; margin-bottom:10px;">
                        HesabÄ±nÄ± sildiÄŸinde tÃ¼m verilerin (maÃ§larÄ±n, puanlarÄ±n) kalÄ±cÄ± olarak silinir.
                    </p>
                    <button id="btn-delete-account" style="background-color: #333; color: white;">HesabÄ±mÄ± KalÄ±cÄ± Olarak Sil</button>
                </div>

            </div>
        </div>

        <div style="height: 80px;"></div>

        <nav class="bottom-nav">
            <div class="nav-item active" data-target="tab-lobby"><span class="nav-icon">ğŸ </span><span class="nav-text">Lobi</span></div>
            <div class="nav-item" data-target="tab-rankings"><span class="nav-icon">ğŸ†</span><span class="nav-text">SÄ±ralama</span></div>
            <div class="nav-item" data-target="tab-bests"><span class="nav-icon">ğŸŒŸ</span><span class="nav-text">En'ler</span></div>
            <div class="nav-item" data-target="tab-challenge"><span class="nav-icon">âš”ï¸</span><span class="nav-text">Meydan</span></div>
            <div class="nav-item" data-target="tab-matches"><span class="nav-icon">ğŸ¾</span><span class="nav-text">MaÃ§larÄ±m</span></div>
             <div class="nav-item" data-target="tab-fixture"><span class="nav-icon">ğŸ“…</span><span class="nav-text">FikstÃ¼r</span></div>
             <div class="nav-item" data-target="tab-gallery"><span class="nav-icon">ğŸ“·</span><span class="nav-text">Galeri</span></div>
             <div class="nav-item" data-target="tab-stats"><span class="nav-icon">ğŸ“Š</span><span class="nav-text">Ä°statistik</span></div>
            <div class="nav-item" data-target="tab-chat"><span class="nav-icon">ğŸ’¬</span><span class="nav-text">Sohbet</span></div>
            <div class="nav-item" data-target="tab-profile"><span class="nav-icon">ğŸ‘¤</span><span class="nav-text">Profil</span></div>
        </nav>

        <div id="match-detail-view" style="display: none;">
            <h3>MaÃ§ DetayÄ±</h3>
            
            <img id="detail-match-photo" src="" style="display:none; width:100%; border-radius:10px; margin-bottom:15px; border:2px solid #eee; object-fit: cover; max-height: 300px;">
            
            <p id="detail-match-info"></p>
            <button id="chat-from-match-btn" class="btn-chat-small" style="display:none;">ğŸ’¬ Rakibe Mesaj At</button>

            <div id="schedule-input-section" style="display:none;">...</div>
            <div id="score-input-section" style="display:none;">...</div>
            <div id="score-display-section" style="display:none;"></div>
            <div id="photo-upload-area" style="display:none; background:#f1f3f5; padding:15px; margin-top:15px; border-radius:10px; border:1px solid #e9ecef;">
    <h4 style="margin-top:0; margin-bottom:10px; font-size:0.95em; color:#444;">ğŸ“¸ MaÃ§ FotoÄŸrafÄ±</h4>
    
    <img id="current-match-photo-display" src="" style="width:100%; max-height:200px; object-fit:cover; border-radius:8px; display:none; margin-bottom:10px;">

    <div style="display:flex; flex-direction:column; gap:10px;">
        <label for="standalone-photo-input" style="cursor:pointer; color:#007bff; font-weight:bold; font-size:0.9em;">
            + FotoÄŸraf SeÃ§ / DeÄŸiÅŸtir
        </label>
        <input type="file" id="standalone-photo-input" accept="image/*" style="display:none;">
        
        <img id="standalone-photo-preview" style="width:100px; height:100px; object-fit:cover; border-radius:5px; display:none; border:2px solid #ddd;">
        
        <button id="btn-save-photo-only" class="btn-save" style="width:100%; margin-top:5px; background-color:#17a2b8;">FotoÄŸrafÄ± Kaydet ğŸ’¾</button>
    </div>
</div>

            <div id="match-interactions-container" style="margin-top: 20px; display:none;">
                
                <div class="interaction-card">
                    <h4 style="text-align:center; margin-bottom:10px;">ğŸ“Š Sence Kim KazanÄ±r?</h4>
                    <div id="poll-loading" style="text-align:center; color:#999;">YÃ¼kleniyor...</div>
                    
                    <div id="poll-voting-area" style="display:none;">
                        <button id="btn-vote-p1" class="btn-poll-option">Oyuncu 1</button>
                        <button id="btn-vote-p2" class="btn-poll-option">Oyuncu 2</button>
                    </div>

                    <div id="poll-results-area" style="display:none;">
                        <div class="poll-result-row">
                            <span id="poll-name-p1" style="font-size:0.8em; font-weight:bold;">P1</span>
                            <span id="poll-perc-p1" style="float:right; font-size:0.8em;">0%</span>
                            <div class="poll-bar-bg"><div id="poll-bar-p1" class="poll-bar-fill" style="width:0%; background:#007bff;"></div></div>
                        </div>
                        <div class="poll-result-row">
                            <span id="poll-name-p2" style="font-size:0.8em; font-weight:bold;">P2</span>
                            <span id="poll-perc-p2" style="float:right; font-size:0.8em;">0%</span>
                            <div class="poll-bar-bg"><div id="poll-bar-p2" class="poll-bar-fill" style="width:0%; background:#dc3545;"></div></div>
                        </div>
                        <div style="text-align:center; font-size:0.7em; color:#777; margin-top:5px;">Toplam <span id="poll-total-votes">0</span> oy</div>
                    </div>
                </div>

                <div class="interaction-card" style="margin-top:15px;">
                    <h4 style="margin-bottom:10px;">ğŸ’¬ MaÃ§ YorumlarÄ±</h4>
                    <div id="match-comments-list" class="comments-list">
                        <p style="text-align:center; color:#999;">HenÃ¼z yorum yok.</p>
                    </div>
                    <div class="comment-input-area">
                        <input type="text" id="match-comment-input" placeholder="Yorum yaz..." maxlength="140">
                        <button id="btn-send-match-comment" style="width:auto; margin:0; padding:10px;">GÃ¶nder</button>
                    </div>
                </div>
            </div>
            <select id="winner-select" style="display:none;"><option value="">KazananÄ± SeÃ§in</option></select>
            <div id="action-buttons-container"></div>
            <p id="result-message"></p>
</div> <button id="btn-share-match-detail" class="btn-main" style="background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d); margin-top: 15px; margin-bottom: 10px;">
        ğŸ“¸ Instagram'da PaylaÅŸ
    </button>

            <button id="back-to-list-btn">Geri DÃ¶n</button>
        </div>

        <div id="player-stats-modal" class="modal">
            <div class="modal-content">
                <span id="close-stats-modal" class="close-modal">&times;</span>
                <div class="modal-header-center">
                    <img id="stats-player-photo" src="" class="modal-photo">
                    <h3 id="stats-player-name" style="margin-bottom: 5px;"></h3>
                    <div style="font-size:0.9em; color:#666; margin-bottom:10px;">
                        <span id="stats-total-points" style="font-weight:bold; color:#28a745;"></span> Puan â€¢ 
                        <span id="stats-court-pref"></span>
                    </div>
                    <button id="start-chat-btn" class="btn-chat" style="margin: 0 auto 10px auto;">Mesaj GÃ¶nder ğŸ’¬</button>
                </div>
                <div class="stats-container">
                    <div id="stats-h2h-box" class="h2h-box" style="display:none;">AramÄ±zdaki MaÃ§lar YÃ¼kleniyor...</div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="font-size:0.8em; color:#666; margin-bottom:5px; text-align:center; text-transform:uppercase; letter-spacing:1px;">Koleksiyon</div>
                        <div id="stats-badges-grid" class="badges-container"></div>
                    </div>

                    <div class="form-container">
                        <span class="form-title">Son 5 MaÃ§ Formu</span>
                        <div id="stats-form-badges" class="form-badges"></div>
                    </div>
                    <div class="pies-container">
                        <div class="pie-wrapper"><div class="stat-pie" id="pie-match-chart" style="--p:0;"><span id="text-match-rate">0%</span></div><span class="pie-label">MaÃ§</span></div>
                        <div class="pie-wrapper"><div class="stat-pie" id="pie-set-chart" style="--p:0; background: conic-gradient(#007bff var(--p), #e9ecef 0);"><span id="text-set-rate">0%</span></div><span class="pie-label">Set</span></div>
                        <div class="pie-wrapper"><div class="stat-pie" id="pie-game-chart" style="--p:0; background: conic-gradient(#ffc107 var(--p), #e9ecef 0);"><span id="text-game-rate">0%</span></div><span class="pie-label">Oyun</span></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="chat-window-modal" class="modal">
            <div class="modal-content chat-content">
                <div class="chat-header">
                    <h3 id="chat-recipient-name">Sohbet</h3>
                    <div>
                        <button id="clear-chat-btn" style="background: none; border: none; color: #dc3545; font-size: 0.8em; margin-right: 10px; cursor: pointer;">Temizle ğŸ—‘ï¸</button>
                        <span id="close-chat-window" class="close-modal-x" style="font-size:24px; cursor: pointer;">&times;</span>
                    </div>
                </div>
                <div id="chat-messages" class="chat-messages"></div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Mesaj yaz...">
                    <button id="send-message-btn">GÃ¶nder</button>
                </div>
            </div>
        </div>

        <div id="notification-container"></div>
        
    </div>

    <div id="forgot-password-modal" class="modal">
        <div class="modal-content" style="text-align:center;">
            <span onclick="document.getElementById('forgot-password-modal').style.display='none'" class="close-modal">&times;</span>
            <h3>ğŸ”‘ Åifre SÄ±fÄ±rlama</h3>
            <p style="font-size:0.9em; color:#666; margin-bottom:15px;">
                HesabÄ±na kayÄ±tlÄ± e-posta adresini gir. Åifreni sÄ±fÄ±rlaman iÃ§in bir baÄŸlantÄ± gÃ¶ndereceÄŸiz.
            </p>
            <div class="input-group">
                <span class="input-icon">âœ‰ï¸</span>
                <input type="email" id="reset-email" placeholder="E-posta Adresin">
            </div>
            <button id="btn-send-reset-link" class="btn-main">SÄ±fÄ±rlama BaÄŸlantÄ±sÄ± GÃ¶nder</button>
            <p id="reset-msg" style="font-size:0.9em; margin-top:10px;"></p>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script src="app.js"></script>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./sw.js').then(function(registration) {
                    console.log('SW BaÅŸarÄ±lÄ±:', registration.scope);
                }, function(err) { console.log('SW HatasÄ±:', err); });
            });
        }
    </script>

    <div id="onboarding-modal" class="modal" style="display: none; z-index: 2000;">
    <div class="modal-content onboarding-content">
        <span id="close-onboarding" class="close-modal">&times;</span>
        
        <div class="onboarding-slider">
            
            <div class="onboarding-slide active-slide" data-index="0">
                <div class="slide-icon">ğŸ‘‹</div>
                <h3>Kortlara HoÅŸ Geldin!</h3>
                <p>Tenis Ligi'nin dijital dÃ¼nyasÄ±na adÄ±m attÄ±n. BurasÄ± sadece skor girdiÄŸin yer deÄŸil, tenis tutkunu dijitalleÅŸtirdiÄŸimiz yer.</p>
                <div class="slide-image-placeholder" style="background: #e3f2fd; color:#0d47a1;">ğŸ†</div>
            </div>

            <div class="onboarding-slide" data-index="1">
                <div class="slide-icon">âš”ï¸</div>
                <h3>MaÃ§ Ayarla & Meydan Oku</h3>
                <p><strong>"Meydan Oku"</strong> sekmesinden arkadaÅŸÄ±na Ã¶zel teklif gÃ¶nder veya <strong>"AÃ§Ä±k Ä°lan"</strong> oluÅŸturarak kendine uygun yeni rakipler bul.</p>
                <div class="slide-image-placeholder" style="background: #fff3e0; color:#e65100;">ğŸ¾</div>
            </div>

            <div class="onboarding-slide" data-index="2">
                <div class="slide-icon">ğŸ“Š</div>
                <h3>Ä°statistiklerin KonuÅŸsun</h3>
                <p>Toprakta mÄ± daha iyisin yoksa sert kortta mÄ±? Galibiyet yÃ¼zdelerini, form durumunu ve kazandÄ±ÄŸÄ±n rozetleri <strong>"Ä°statistik"</strong> ve <strong>"Profil"</strong> sekmelerinde takip et.</p>
                <div class="slide-image-placeholder" style="background: #e8f5e9; color:#1b5e20;">ğŸ“ˆ</div>
            </div>

            <div class="onboarding-slide" data-index="3">
                <div class="slide-icon">ğŸ’¬</div>
                <h3>SosyalleÅŸ & PaylaÅŸ</h3>
                <p>MaÃ§ sonuÃ§larÄ±na yorum yap, anketlere katÄ±l, galibiyet fotoÄŸraflarÄ±nÄ± yÃ¼kle. Ligdeki herkesle etkileÅŸimde kal!</p>
                <div class="slide-image-placeholder" style="background: #f3e5f5; color:#4a148c;">ğŸ“¸</div>
            </div>

        </div>

        <div class="onboarding-footer">
            <div class="dots-container">
                <span class="dot active"></span>
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>
            <button id="btn-next-slide" class="btn-main" style="margin:0; width: auto; padding: 10px 30px;">Ä°lerle ğŸ‘‰</button>
            <button id="btn-finish-onboarding" class="btn-main" style="margin:0; width: auto; padding: 10px 30px; display: none; background-color: #28a745;">BaÅŸla! ğŸš€</button>
        </div>
    </div>
</div>

<div id="recap-modal" class="modal" style="display: none; z-index: 3000;">
    <div id="recap-capture-area" class="modal-content recap-content" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; border:none; text-align:center;">
        <span id="close-recap" class="close-modal" style="color:white; opacity:0.8;">&times;</span>
        
        <div id="recap-header">
            <div style="font-size:3em; margin-bottom:10px;">ğŸ—“ï¸</div>
            <h2 id="recap-title" style="color:white; margin:0; text-shadow:0 2px 4px rgba(0,0,0,0.2);">Ã–zet YÃ¼kleniyor...</h2>
            <p id="recap-subtitle" style="color:rgba(255,255,255,0.8); margin-top:5px; font-size:0.9em;">Performans Raporu</p>
        </div>

        <div class="recap-stats-grid" style="margin: 20px 0; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <div class="recap-stat-box">
                <span class="recap-val" id="recap-matches">0</span>
                <span class="recap-lbl">MaÃ§</span>
            </div>
            <div class="recap-stat-box">
                <span class="recap-val" id="recap-wins">0</span>
                <span class="recap-lbl">Galibiyet</span>
            </div>
            <div class="recap-stat-box">
                <span class="recap-val" id="recap-rate">%0</span>
                <span class="recap-lbl">Kazanma</span>
            </div>
            <div class="recap-stat-box">
                <span class="recap-val" id="recap-points">0</span>
                <span class="recap-lbl">Puan</span>
            </div>
        </div>

        <div id="recap-photos-area" style="margin-bottom:20px; display:none;">
            <p style="font-size:0.8em; color:rgba(255,255,255,0.7); margin-bottom:5px;">ğŸ“¸ AyÄ±n Kareleri</p>
            <div id="recap-photo-grid" style="display:flex; justify-content:center; gap:5px; overflow-x:auto;">
                </div>
        </div>

        <div id="recap-message" style="font-style:italic; font-size:0.95em; margin-bottom:20px; color:#ffc107;">
            </div>

        <div class="share-branding" style="margin-bottom: 15px; font-size: 0.8em; opacity: 0.8; letter-spacing: 1px;">
            ğŸ† trtenis.com lig istatistikleri
        </div>

        <button id="btn-share-recap" class="btn-main" style="background: white; color: #1e3c72; border:none; box-shadow:0 4px 15px rgba(0,0,0,0.2); display:flex; align-items:center; justify-content:center; gap:10px; width:100%;">
            ğŸ“¸ Instagram'da PaylaÅŸ
        </button>
        <p style="font-size:0.7em; color:rgba(255,255,255,0.6); margin-top:5px;">(GÃ¶rseli Hikayene Ekleyebilirsin)</p>
    </div>
</div>

</body>
</html>